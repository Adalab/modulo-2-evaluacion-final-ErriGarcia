let favoriteCocktails=[],cocktails=[];const searchInput=document.querySelector(".js-search-input"),searchButton=document.querySelector(".js-search-button"),resetButton=document.querySelector(".js-reset-button"),removeFavoriteListButton=document.querySelector(".js-remove-favorite-cocktail-list"),errorElement=document.querySelector(".js-error-message");function handleClickSearchButton(){searchCocktails()}function handleEnterKeyPress(t){"Enter"===t.key&&(t.preventDefault(),searchCocktails())}function handleClickResetButton(){searchInput.value="",handleClickRemoveFavoriteListButton()}function getCocktailsFromLocalStorage(){let t=JSON.parse(localStorage.getItem("favoriteCocktails"));t&&(favoriteCocktails=t,createTitle(".js-favorite-cocktails-title",`Hay ${favoriteCocktails.length} cocktails favoritos`),showCocktailList(".js-favorite-cocktails-list",favoriteCocktails))}function showErrorMessage(){errorElement.classList.remove("hidden")}function removeErrorMessage(){errorElement.classList.add("hidden")}function createTitle(t,e){document.querySelector(t).innerHTML=e}function showCocktailList(t,e){let i="",o="";".js-favorite-cocktails-list"===t&&(i="selected",o="-favorite-list");const s=document.querySelector(t);s.innerHTML="";for(const t of e)t.strDrinkThumb||(t.strDrinkThumb="https://via.placeholder.com/210x295/ffffff/666666/?text="+t.strDrink),s.innerHTML+=`<li class="main-container-section-cocktails-list-main-list-li">\n            <article class="main-container-section-cocktails-list-main-list-li-article">\n            <img class="cocktail-img" src="${t.strDrinkThumb}">\n            <div class="main-container-section-cocktails-list-main-list-li-container">\n                <h4>${t.strDrink}</h4>\n                <ion-icon name="heart" class="js-favorite-icon${o} ${i} favorite-button" id="${t.idDrink}">\n                </ion-icon>\n            </div>\n            </article>\n        </li>`;".js-favorite-cocktails-list"===t&&removeFavoriteCocktail()}function addOrRemoveCocktailToFavoriteList(){const t=document.querySelectorAll(".js-favorite-icon");for(const i of t)i.addEventListener("click",e);function e(t){const e=t.target.id,i=cocktails.find(t=>t.idDrink===e),o=favoriteCocktails.findIndex(t=>t.idDrink===e);-1===o?(t.target.classList.add("selected"),favoriteCocktails.push(i),removeFavoriteListButton.classList.remove("hidden")):(t.target.classList.remove("selected"),favoriteCocktails.splice(o,1)),favoriteCocktails.length>0?(createTitle(".js-favorite-cocktails-title",`Hay ${favoriteCocktails.length} cocktails favoritos`),removeFavoriteListButton.classList.remove("hidden")):(createTitle(".js-favorite-cocktails-title","Añade un cocktail en tu lista de favoritos"),removeFavoriteListButton.classList.add("hidden")),showCocktailList(".js-favorite-cocktails-list",favoriteCocktails),localStorage.setItem("favoriteCocktails",JSON.stringify(favoriteCocktails))}}function removeFavoriteCocktail(){const t=document.querySelectorAll(".js-favorite-icon-favorite-list");for(const i of t)i.addEventListener("click",e);function e(t){const e=t.target.id,i=(favoriteCocktails.find(t=>t.idDrink===e),favoriteCocktails.findIndex(t=>t.idDrink===e));favoriteCocktails.splice(i,1);document.getElementById(e).classList.remove("selected"),favoriteCocktails.length>0?createTitle(".js-favorite-cocktails-title",`Hay ${favoriteCocktails.length} cocktails favoritos`):(createTitle(".js-favorite-cocktails-title","Añade un cocktail en tu lista de favoritos"),removeFavoriteListButton.classList.add("hidden")),showCocktailList(".js-favorite-cocktails-list",favoriteCocktails),localStorage.setItem("favoriteCocktails",JSON.stringify(favoriteCocktails))}}function searchCocktails(){let t="margarita";searchInput.value?(t=searchInput.value,removeErrorMessage()):showErrorMessage(),fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+t).then(t=>t.json()).then(t=>{cocktails=t.drinks,cocktails?(createTitle(".js-cocktails-title",`Hay ${cocktails.length} cocktails`),showCocktailList(".js-cocktails-list",cocktails),addOrRemoveCocktailToFavoriteList(),getCocktailsFromLocalStorage(),keepCocktailsSelected(),removeErrorMessage()):showErrorMessage()})}function handleClickRemoveFavoriteListButton(){localStorage.removeItem("favoriteCocktails"),favoriteCocktails=[],createTitle(".js-favorite-cocktails-title","Añade un cocktail en tu lista de favoritos"),showCocktailList(".js-favorite-cocktails-list",favoriteCocktails),removeFavoriteListButton.classList.add("hidden");const t=document.querySelectorAll(".js-favorite-icon");for(const e of t)e.classList.remove("selected")}searchCocktails(),searchButton.addEventListener("click",handleClickSearchButton),searchInput.addEventListener("keypress",handleEnterKeyPress),resetButton.addEventListener("click",handleClickResetButton),removeFavoriteListButton.addEventListener("click",handleClickRemoveFavoriteListButton),searchButton.addEventListener("click",handleSearchClick);for(const t of cocktailsIds){document.getElementById(t).classList.add("selected"),removeFavoriteListButton.classList.remove("hidden")}